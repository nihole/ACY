<?xml version="1.0" encoding="UTF-8"?>
<polUni>
   	 <infraInfra>
	    	<infraFuncP>
			{% for j in int_pol_group %}
			{% set action %}{%if j.action%}{{j.action}}{%else%}{{default.action}}{%endif%}{% endset %}
			{%if not action=="ignore"%}
			{% set name %}{%if j.name%}{{j.name}}{%else%}{{default.name}}{%endif%}{% endset %}
			{% set description %}{%if j.description%}{{j.description}}{%else%}{{default.description}}{%endif%}{% endset %}
			{% set type %}{%if j.type%}{{j.type}}{%else%}{{default.type}}{%endif%}{% endset %}
			{% set lldp_pol %}{%if j.lldp_pol%}{{j.lldp_pol}}{%else%}{{default.lldp_pol}}{%endif%}{% endset %}
			{% set l2_int_pol %}{%if j.l2_int_pol%}{{j.l2_int_pol}}{%else%}{{default.l2_int_pol}}{%endif%}{% endset %}
			{% set ipv4_netflow %}{%if j.ipv4_netflow%}{{j.ipv4_netflow}}{%else%}{{default.ipv4_netflow}}{%endif%}{% endset %}
			{% set ipv6_netflow %}{%if j.ipv6_netflow%}{{j.ipv6_netflow}}{%else%}{{default.ipv6_netflow}}{%endif%}{% endset %}
			{% set ingress_pol %}{%if j.ingress_pol%}{{j.ingress_pol}}{%else%}{{default.ingress_pol}}{%endif%}{% endset %}
			{% set egress_pol %}{%if j.egress_pol%}{{j.egress_pol}}{%else%}{{default.egress_pol}}{%endif%}{% endset %}
			{% set monitor_pol %}{%if j.monitor_pol%}{{j.monitor_pol}}{%else%}{{default.monitor_pol}}{%endif%}{% endset %}
			{% set stp_pol %}{%if j.stp_pol%}{{j.stp_pol}}{%else%}{{default.stp_pol}}{%endif%}{% endset %}
			{% set int_pol %}{%if j.l2_int_pol%}{{j.l2_int_pol}}{%else%}{{default.l2_int_pol}}{%endif%}{% endset %}
			{% set cdp_pol %}{%if j.cdp_pol%}{{j.cdp_pol}}{%else%}{{default.cdp_pol}}{%endif%}{% endset %}
			{% set mcp_pol %}{%if j.mcp_pol%}{{j.mcp_pol}}{%else%}{{default.mcp_pol}}{%endif%}{% endset %}
			{% set aaep %}{%if j.aaep%}{{j.aaep}}{%else%}{{default.aaep}}{%endif%}{% endset %}
			{% set storm_pol %}{%if j.storm_pol%}{{j.storm_pol}}{%else%}{{default.storm_pol}}{%endif%}{% endset %}
			{% set link_pol %}{%if j.link_pol%}{{j.link_pol}}{%else%}{{default.link_pol}}{%endif%}{% endset %}
			{% set lacp_pol %}{%if j.lacp_pol%}{{j.lacp_pol}}{%else%}{{default.lacp_pol}}{%endif%}{% endset %}
			{% if type == 'vPC' %}
				{% set tag %}infraAccBndlGrp{% endset %}
				{% set bundle %}lagT="node"{% endset %}
			{% elif type == 'PC' %}
				{% set tag %}infraAccBndlGrp{% endset %}
				{% set bundle %}lagT="link"{% endset %}
			{% elif type == 'Access' %}
				{% set tag %}infraAccPortGrp{% endset %}
				{% set bundle %}{% endset %}
			{% endif %}
			<{{tag}} ownerTag="" ownerKey="" name="{{name}}" {{bundle}} descr="{{description}}" status="{{action}}">
				<infraRsMonIfInfraPol tnMonInfraPolName=""/>
				<infraRsLldpIfPol tnLldpIfPolName="{{lldp_pol}}"/>
				<infraRsStpIfPol tnStpIfPolName="{{stp_pol}}"/>
				<infraRsL2IfPol tnL2IfPolName="{{l2_int_pol}}"/>
				<infraRsCdpIfPol tnCdpIfPolName="{{cdp_pol}}"/>
				<infraRsMcpIfPol tnMcpIfPolName="{{mcp_pol}}"/>
				<infraRsAttEntP tDn="uni/infra/attentp-{{aaep}}"/>
				<infraRsStormctrlIfPol tnStormctrlIfPolName="{{storm_pol}}"/>
				<infraRsHIfPol tnFabricHIfPolName="{{link_pol}}"/>
				{% if type != "Access" %}
				<infraRsLacpPol tnLacpLagPolName="{{lacp_pol}}"/>
				{% endif %}
			</{{tag}}>
			{%endif%}{% endfor %}
		</infraFuncP>
	</infraInfra>
</polUni>
